/**
 * angular-touch-nav
 * @version v0.2.3 - 2013-08-29
 * @link https://github.com/mgcrea/angular-touch-nav
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";angular.module("ngTouchNav",["ngRoute","ngAnimate"]),angular.element,angular.module("ngTouchNav").config(["$provide",function(a){a.decorator("ngViewDirective",["$delegate","$navigate","$route","$anchorScroll","$compile","$controller","$animate",function(a,b,c,d,e,f,g){var h=a[0];return h.compile=function(a,h,i){var j=!0,k=null;return function(a,h,l){function m(){o&&(o.$destroy(),o=null),p&&(b.animation!==k&&(p.removeClass(k),b.animation&&p.addClass(b.animation)),g.leave(p),p=null)}function n(){var l=c.current&&c.current.locals,n=l&&l.$template;if(n){var r=a.$new();i(r,function(a){m(),a.html(n),b.animation&&(k=b.animation,j?setTimeout(function(){j=!1,a.addClass(b.animation)}):a.addClass(b.animation)),g.enter(a,null,h);var i=e(a.contents()),s=c.current;if(o=s.scope=r,p=a,s.controller){l.$scope=o;var t=f(s.controller,l);s.controllerAs&&(o[s.controllerAs]=t),a.data("$ngControllerController",t),a.contents().data("$ngControllerController",t)}i(o),o.$emit("$viewContentLoaded"),o.$eval(q),d()})}else m()}var o,p,q=l.onload||"";a.$on("$routeChangeSuccess",n),n()}},a}])}]);var c=angular.forEach;angular.module("ngTouchNav").config(["$animateProvider",function(a){function b(a,b){var d="";return a=angular.isArray(a)?a:a.split(/\s+/),c(a,function(a,c){a&&a.length>0&&(d+=(c>0?" ":"")+a+b)}),d}a.register("",["$window","$sniffer","$timeout",function(a,c,d){function e(b,e,o){function p(a){var b=0,c=angular.isString(a)?a.split(/\s*,\s*/):[];return f(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}if(!c.transitions&&!c.animations)return o(),void 0;if(-1==["ng-enter","ng-leave","ng-move"].indexOf(e)){var q=0;if(f(b,function(b){if(b.nodeType==n){var c=a.getComputedStyle(b)||{};q=Math.max(p(c[h+k]),p(c[j+k]),q)}}),q>0)return o(),void 0}b.addClass(e);var r=0;if(f(b,function(b){if(b.nodeType==n){var c=a.getComputedStyle(b)||{},d=Math.max(p(c[h+l]),p(c[j+l])),e=Math.max(p(c[g+l]),p(c[i+l])),f=Math.max(p(c[h+k]),p(c[j+k])),o=Math.max(p(c[g+k]),p(c[i+k]));o>0&&(o*=Math.max(parseInt(c[g+m])||0,parseInt(c[i+m])||0,1)),r=Math.max(e+o,d+f,r)}}),r>0){var s="";return f(e.split(" "),function(a,b){s+=(b>0?" ":"")+a+"-active"}),d(function(){b.addClass(s),d(o,1e3*r+50,!1);var a="animationend",e="transitionend",f=c.vendorPrefix.toLowerCase()+"AnimationEnd",g=c.vendorPrefix.toLowerCase()+"TransitionEnd",h=[a,f,e,g].join(" "),i=function(){console.warn("callback"),b.off(h,i),d(o,0,!1)};b.on(h,i)},0,!1),function(a){b.removeClass(e),b.removeClass(s),a&&o()}}b.removeClass(e),o()}angular.noop;var f=angular.forEach,g="animation",h="transition",i=c.vendorPrefix+"Animation",j=c.vendorPrefix+"Transition",k="Duration",l="Delay",m="IterationCount",n=1;return{enter:function(a,b){return e(a,"ng-enter",b)},leave:function(a,b){return e(a,"ng-leave",b)},move:function(a,b){return e(a,"ng-move",b)},addClass:function(a,c,d){return e(a,b(c,"-add"),d)},removeClass:function(a,c,d){return e(a,b(c,"-remove"),d)}}}])}]);var c=angular.forEach;angular.module("ngTouchNav").run(["$rootScope","$navigate",function(a,c){a.$navigate=c,a.$redraw=function(){b.body.removeChild(b.body.appendChild(b.createElement("style")))}}]).provider("$navigate",function(){this.$get=["$location","$timeout","$rootScope",function(a){var b=this;return this.history=[],this.defaultAnimation="animation-slide",this.animation=this.defaultAnimation,setTimeout(function(){b.history.push({path:a.path(),animation:null})}),this.setAnimation=function(a,c){return a&&(b.animation=c?a+" ng-reverse":a),b.animation},this.path=function(b,c,d){"boolean"==typeof c&&(d=c,c=null),this.setAnimation(c||this.defaultAnimation,d),a.path(b),d||this.history.push({path:b,animation:c})},this.search=function(b,c,d,e){this.setAnimation(d||this.defaultAnimation,e),a.search(b,c)},this.back=function(){if(!(this.history.length<2)){var a=this.history.pop().animation,b=this.history[this.history.length-1];b.path&&this.path(b.path,a,!0)}},this}]})}(window,document);