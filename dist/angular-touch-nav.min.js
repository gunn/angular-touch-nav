/**
 * angular-touch-nav
 * @version v0.2.2 - 2013-08-30
 * @link https://github.com/mgcrea/angular-touch-nav
 * @author Olivier Louvignes <olivier@mg-crea.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";angular.module("ngTouchNav",["ngRoute","ngAnimate"]);var c=angular.element;angular.module("ngTouchNav").config(["$provide",function(a){a.decorator("ngViewDirective",["$delegate","$navigate","$route","$anchorScroll","$compile","$controller","$animate",function(a,d,e,f,g,h,i){var j=a[0],k=j.priority,l=!0;return j.compile=function(a,j){var m=j.onload||"";a.html("");var n=c(b.createComment(" ngView "));return a.replaceWith(n),function(b){function c(){o&&(o.$destroy(),o=null),p&&(d.animation!==q&&(p.removeClass(q),d.animation&&p.addClass(d.animation)),i.leave(p),p=null)}function j(){var j=e.current&&e.current.locals,r=j&&j.$template;if(r){c(),o=b.$new(),p=a.clone(),p.html(r),d.animation&&(q=d.animation,l?setTimeout(function(){l=!1,p.addClass(d.animation)}):p.addClass(d.animation)),i.enter(p,null,n);var s=g(p,!1,k-1),t=e.current;if(t.controller){j.$scope=o;var u=h(t.controller,j);t.controllerAs&&(o[t.controllerAs]=u),p.data("$ngControllerController",u),p.children().data("$ngControllerController",u)}t.scope=o,s(o),o.$emit("$viewContentLoaded"),o.$eval(m),f()}else c()}var o,p,q;b.$on("$routeChangeSuccess",j),j()}},a}])}]);var d=angular.forEach;angular.module("ngTouchNav").config(["$animateProvider",function(a){function b(a,b){var c="";return a=angular.isArray(a)?a:a.split(/\s+/),d(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}a.register("",["$window","$sniffer","$timeout",function(a,c,d){function e(b,e,g){function h(a){var b=0,c=angular.isString(a)?a.split(/\s*,\s*/):[];return f(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function i(){var i=0;f(e.split(" "),function(a,b){k+=(b>0?" ":"")+a+"-active"}),b.addClass(k);var j="animation",l="transition",m=c.vendorPrefix+"Animation",n=c.vendorPrefix+"Transition",o="Duration",p="Delay",q="IterationCount",r=1;if(f(b,function(b){if(b.nodeType===r){var c=a.getComputedStyle(b)||{},d=Math.max(h(c[l+p]),h(c[n+p])),e=Math.max(h(c[j+p]),h(c[m+p])),f=Math.max(h(c[l+o]),h(c[n+o])),g=Math.max(h(c[j+o]),h(c[m+o]));g>0&&(g*=Math.max(parseInt(c[j+q],10)||0,parseInt(c[m+q],10)||0,1)),i=Math.max(e+g,d+f,i)}}),!i)return d(g,0,!1);var s="animationend",t="transitionend",u=c.vendorPrefix.toLowerCase()+"AnimationEnd",v=c.vendorPrefix.toLowerCase()+"TransitionEnd",w=[s,u,t,v].join(" "),x=function(){b.off(w,x),d(g,0,!1)};b.on(w,x),d(x,1e3*i+50,!1)}function j(a){b.removeClass(k),a&&g()}if(c.transitions||c.animations){var k="";return d(i,1,!1),j}g()}angular.noop;var f=angular.forEach;return{enter:function(a,b){return e(a,"ng-enter",b)},leave:function(a,b){return e(a,"ng-leave",b)},move:function(a,b){return e(a,"ng-move",b)},addClass:function(a,c,d){return e(a,b(c,"-add"),d)},removeClass:function(a,c,d){return e(a,b(c,"-remove"),d)}}}])}]);var d=angular.forEach;angular.module("ngTouchNav").run(["$rootScope","$navigate",function(a,c){a.$navigate=c,a.$redraw=function(){b.body.removeChild(b.body.appendChild(b.createElement("style")))}}]).provider("$navigate",function(){this.$get=["$location","$timeout","$rootScope",function(a){var b=this;return this.history=[],this.defaultAnimation="animation-slide",this.animation=this.defaultAnimation,setTimeout(function(){b.history.push({path:a.path(),animation:null})}),this.setAnimation=function(a,c){return a&&(b.animation=c?a+" ng-reverse":a),b.animation},this.path=function(b,c,d){"boolean"==typeof c&&(d=c,c=null),this.setAnimation(c||this.defaultAnimation,d),a.path(b),d||this.history.push({path:b,animation:c})},this.search=function(b,c,d,e){this.setAnimation(d||this.defaultAnimation,e),a.search(b,c)},this.back=function(){if(!(this.history.length<2)){var a=this.history.pop().animation,b=this.history[this.history.length-1];b.path&&this.path(b.path,a,!0)}},this}]})}(window,document);